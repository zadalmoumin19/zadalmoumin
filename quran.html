<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>زاد المؤمن - القرآن الكريم 🌙</title>
    
    <!-- ✅ ربط ملف CSS -->
    <link rel="stylesheet" href="quran.css">
    
    <!-- ✅ ربط مكتبة الأيقونات -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* أنماط احتياطية في حال عدم تحميل CSS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #0a1a13;
            color: white;
            padding: 20px;
        }
        .loading { 
            text-align: center; 
            padding: 50px; 
            font-size: 1.5rem; 
        }
    </style>
</head>
<body>
    <!-- ✅ هيكل الصفحة الرئيسي -->
    <div id="app">
        <div class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>جاري تحميل القرآن الكريم...</p>
        </div>
    </div>

    <!-- ✅ ربط ملفات JavaScript بالترتيب الصحيح -->
    
    <!-- 1. بيانات القرآن أولاً -->
    <script src="data.js"></script>
    
    <!-- 2. نظام الصوت -->
    <script src="audio-system.js"></script>
    
    <!-- 3. التطبيق الرئيسي -->
    <script src="quran.js"></script>
    
    <!-- ✅ كود التهيئة -->
    <script>
        // التأكد من تحميل جميع الملفات
        window.addEventListener('load', function() {
            console.log('✅ جميع الملفات محملة بنجاح');
            
            // إخفاء شاشة التحميل بعد 2 ثانية
            setTimeout(function() {
                const loading = document.querySelector('.loading');
                if (loading) {
                    loading.style.display = 'none';
                }
                
                // تهيئة التطبيق إذا كان موجوداً
                if (window.quranApp) {
                    window.quranApp.init();
                } else {
                    console.error('❌ التطبيق غير معروف');
                    // عرض واجهة بديلة
                    document.getElementById('app').innerHTML = `
                        <div style="text-align: center; padding: 50px;">
                            <h1>🌙 زاد المؤمن - القرآن الكريم</h1>
                            <p>تعذر تحميل التطبيق بشكل كامل</p>
                            <a href="index.html" style="color: #d4af37;">العودة للصفحة الرئيسية</a>
                        </div>
                    `;
                }
            }, 2000);
        });

        // التعامل مع أخطاء تحميل الملفات
        window.addEventListener('error', function(e) {
            console.error('❌ خطأ في تحميل الملف:', e.filename);
            
            const app = document.getElementById('app');
            if (app) {
                app.innerHTML = `
                    <div style="text-align: center; padding: 50px; background: #ff4444; border-radius: 10px; margin: 20px;">
                        <h2>⚠️ خطأ في التحميل</h2>
                        <p>تعذر تحميل الملف: ${e.filename}</p>
                        <p>يرجى التأكد من وجود جميع الملفات في المجلد</p>
                        <a href="index.html" style="color: white; text-decoration: underline;">العودة للصفحة الرئيسية</a>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
